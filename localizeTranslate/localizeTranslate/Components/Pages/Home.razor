@page "/"
@inject IJSRuntime JS
@inject IStringLocalizer<localizeTranslate.SharedResource> L
@inject IPortfolioDataService PortfolioData

<div class="container">
    <header>
        <div class="header-content">
            <div class="profile-image">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Crect width='300' height='300' fill='%23f0f0f0'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='80' fill='%23666'%3ETR%3C/text%3E%3C/svg%3E" alt="Thanakon Ruchikanchanarat">
            </div>

            <div class="header-text">
                <h1>THANAKON<br>RUCHIKANCHANARAT</h1>
                <p class="subtitle">@L["Header_Subtitle"]</p>
                <p class="summary">@L["Header_Summary"]</p>

                <div class="contact-info">
                    <div class="contact-item"><span>093-0560310</span></div>
                    <div class="contact-item">
                        <a href="mailto:bitelion9909@gmail.com">bitelion9909@gmail.com</a>
                    </div>
                    <div class="contact-item">
                        <a href="https://github.com/liondev" target="_blank">GitHub: liondev</a>
                    </div>
                    <div class="contact-item"><span>@L["Header_Location"]</span></div>
                </div>
            </div>
        </div>
    </header>

    @* ===== Work Experience ===== *@
    <section>
        <h2 class="section-title">@L["Section_WorkExperience"]</h2>

        <div class="experience-grid">
            @foreach (var job in PortfolioData.GetJobs())
            {
                <div class="experience-card">
                    <div class="experience-header">
                        <div>
                            <h3 class="job-title">@job.Title</h3>
                            <p class="company">@job.Company</p>
                        </div>
                        <span class="period">@job.Period</span>
                    </div>

                    <ul>
                        @foreach (var detail in job.Details)
                        {
                            <li>@detail</li>
                        }
                    </ul>
                </div>
            }
        </div>
    </section>

    @* ===== Projects ===== *@
    <section>
        <h2 class="section-title">@L["Section_Projects"]</h2>
        <div class="projects-grid">
            @foreach (var project in PortfolioData.GetProjects())
            {
                <div class="project-card">
                    <h3 class="project-title">@project.Title</h3>
                    <p class="project-year">@project.Year</p>
                    <p class="project-description">@project.Description</p>
                </div>
            }
        </div>
    </section>

    @* ===== Skills ===== *@
    <section>
        <h2 class="section-title">@L["Section_Skills"]</h2>
        <div class="skills-container">
            @foreach (var category in PortfolioData.GetSkills())
            {
                <div class="skill-category">
                    <h3 class="skill-category-title">@category.Name</h3>
                    <div class="skill-tags">
                        @foreach (var skill in category.Items)
                        {
                            <span class="skill-tag">@skill</span>
                        }
                    </div>
                </div>
            }
        </div>
    </section>

    @* ===== Education ===== *@
    <section>
        <h2 class="section-title">@L["Section_Education"]</h2>

        @foreach (var edu in PortfolioData.GetEducation())
        {
            <div class="education-card">
                <h3 class="degree">@edu.Degree</h3>
                <p class="institution">@edu.School</p>
                <p class="education-period">@edu.Period</p>
            </div>
        }
    </section>

    <footer>
        <p>@L["Footer_Copyright"]</p>
        <p><a href="https://github.com/liondev" target="_blank">@L["Footer_ViewGitHub"]</a></p>
    </footer>
</div>

<script>
    window.portfolio = {
        init: function () {

            // Smooth scroll
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Intersection Observer
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            });

            document.querySelectorAll('.experience-card, .project-card, .education-card')
                .forEach(card => observer.observe(card));
        }
    };

</script>

@code {

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JS.InvokeVoidAsync("portfolio.init");
        }
    }
}
